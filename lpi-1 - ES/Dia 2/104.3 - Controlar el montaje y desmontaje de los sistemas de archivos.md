
## Objetivos

- Montar y desmontar sistemas de archivos manualmente.
- Configurar el montaje en el arranque.
- Usar etiquetas y UUID para el montaje confiable.
- Implementar unidades de montaje con systemd.

---

## 1. Introducción

Para acceder al contenido de un sistema de archivos en Linux, este debe estar montado en un directorio conocido como **punto de montaje**. Este montaje puede ser manual o automático.

---

## 2. Montaje y desmontaje de sistemas de archivos

### Sintaxis del comando `mount`:

```bash
mount -t <tipo_fs> <dispositivo> <punto_de_montaje>
```

### Ejemplo:

```bash
sudo mount -t ext4 /dev/sdb1 /mnt/usb
```

### Desmontar un sistema de archivos:

```bash
sudo umount /mnt/usb
```

---

## 3. Montaje de sistemas de archivos en el arranque

Se realiza configurando el archivo `/etc/fstab`.

### Formato del archivo:

```php
<dispositivo> <punto_de_montaje> <tipo_fs> <opciones> <dump> <pass>
```

### Ejemplo con UUID:

```fstab
UUID=6e2c12e3-472d-4bac-a257-c49ac07f3761  /  ext4  defaults,noatime  0  1
LABEL=homedisk  /home  ext4  defaults  0  2
```

Ver UUIDs disponibles:

```bash
lsblk -f
```

---

## 4. Uso de UUID y etiquetas

### Ver etiquetas y UUID:

```bash
lsblk -f
```

### Montaje con UUID:

```bash
sudo mount -t ext4 UUID=6e2c12e3-472d-4bac-a257-c49ac07f3761 /mnt/datos
```

### Montaje con etiqueta:

```bash
sudo mount -t ext4 LABEL=homedisk /mnt/datos
```

---

## 5. Montaje de discos con Systemd

### Archivo `.mount` (ejemplo `/etc/systemd/system/mnt-external.mount`):

```ini
[Unit]
Description=External data disk

[Mount]
What=/dev/disk/by-uuid/56C11DCC5D2E1334
Where=/mnt/external
Type=ntfs
Options=defaults

[Install]
WantedBy=multi-user.target
```

### Comandos para activar la unidad:

```bash
sudo systemctl daemon-reload
sudo systemctl start mnt-external.mount
sudo systemctl enable mnt-external.mount
```

---

## 6. Montaje automático con `.automount`

Archivo `/etc/systemd/system/mnt-external.automount`:

```ini
[Unit]
Description=Automount for the external data disk

[Automount]
Where=/mnt/external

[Install]
WantedBy=multi-user.target
```

Activar montaje automático:

```bash
sudo systemctl daemon-reload
sudo systemctl start mnt-external.automount
sudo systemctl enable mnt-external.automount
```

---

## Ejercicios Guiados

### 1. Montar manualmente una partición ext4:

```bash
sudo mkdir /mnt/datos
sudo mount -t ext4 /dev/sdc1 /mnt/datos
```
### 2. Montar de solo lectura:

```bash
sudo mount -t ext4 -o ro,noatime /dev/sdc1 /mnt/external
```
### 3. Desmontar:

```bash
sudo umount /mnt/external
```

---

## Actividad Final

**Diseña las siguientes entradas para `/etc/fstab`**:

1. Montar `/dev/sdb1` en `/mnt/backup` como `btrfs`, sin permitir ejecución:

```ini
LABEL=Backup /mnt/backup btrfs defaults,noexec 0 2
```

2. Crear un archivo `.mount` para montar `UUID=56C11DCC5D2E1334` en `/mnt/external` con tipo `ntfs`.

**Nombre del archivo:** `/etc/systemd/system/mnt-external.mount`

```ini
[Unit]
Description=External data disk

[Mount]
What=/dev/disk/by-uuid/56C11DCC5D2E1334
Where=/mnt/external
Type=ntfs
Options=defaults

[Install]
WantedBy=multi-user.target
```