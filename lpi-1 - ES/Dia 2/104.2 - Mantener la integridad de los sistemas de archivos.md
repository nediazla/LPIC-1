
## ğŸ¯ Objetivos

- Verificar el uso de disco y espacio libre en el sistema.
- Utilizar herramientas para comprobar y reparar sistemas de archivos.
- Optimizar y ajustar parÃ¡metros del sistema de archivos ext.
- Trabajar con `ext2/3/4` y `XFS`.

---

## 1. ğŸ“˜ IntroducciÃ³n

Los sistemas de archivos modernos (ext3, ext4, xfs) usan _journaling_ para registrar operaciones antes de aplicarlas. Esto protege contra corrupciÃ³n, pero **aÃºn se requiere supervisiÃ³n y reparaciÃ³n periÃ³dica**LPI-Learning-Material-1â€¦.

---
## 2. ğŸ“Š ComprobaciÃ³n del uso del disco

### Comando `du` (disk usage)

Muestra cuÃ¡nto espacio ocupa un directorio y sus contenidos:

```bash
du -h
```

ParÃ¡metros Ãºtiles:

- `-a`: incluye archivos
- `-h`: salida legible
- `-S`: excluye subdirectorios
- `-d N`: limita profundidad

Ejemplo:

```bash
du -ah --exclude="*.bin"
```

---
## 3. ğŸ“ˆ ComprobaciÃ³n de espacio libre

### Comando `df`

Muestra espacio libre a nivel de sistema de archivos:

```bash
df -h
```

Filtrar por tipo:

```bash
df -t ext4
```

Mostrar inodos:

```bash
df --output=source,fstype,itotal,iused,ipcent
```

---

## 4. ğŸ§° Mantenimiento de sistemas de archivos

### Comando `fsck`

Herramienta para comprobar y reparar:

```bash
fsck /dev/sdX
```

ParÃ¡metros Ãºtiles:

- `-A`: todos los de `/etc/fstab`
- `-C`: barra de progreso
- `-N`: modo simulaciÃ³n
- `-R`: excluye raÃ­z
- `-V`: modo detallado
- `-t tipo`: especifica tipo (vfat, ext4â€¦)

### Comando `e2fsck`

EspecÃ­fico para ext2/3/4:

```bash
e2fsck -p /dev/sda1   # automÃ¡tico
e2fsck -y /dev/sda1   # todo sÃ­
e2fsck -n /dev/sda1   # solo lectura
```

> âš ï¸ **No usar `fsck` sobre sistemas montados**LPI-Learning-Material-1â€¦

---

## 5. ğŸ§ª Ajustes con `tune2fs`

Permite ver o cambiar parÃ¡metros de ext:

```bash
tune2fs -l /dev/sda1
tune2fs -l /dev/sda1
```

### Ejemplos:

- Convertir ext2 a ext3 y aplicar cambios:

```bash
tune2fs -j -C 0 -L UserData /dev/sdb1
```

- Cambiar cantidad mÃ¡xima de montajes antes de chequeo:

```bash
tune2fs -c 10 /dev/sda1
```

---
## 6. ğŸ§ª XFS: VerificaciÃ³n

- ReparaciÃ³n:

```bash
xfs_repair /dev/sdX
```

- DiagnÃ³stico:

```bash
xfs_db /dev/sdX
```

---

## ğŸ§ª Ejercicios Guiados

1. Ver espacio usado por archivos del directorio actual:

```bash
du -S -h -d 0
```

2. Ver info detallada de sistemas ext4:

```bash
df -t ext4 --output=source,target,itotal,iavail,pcent
```

3. Ejecutar reparaciÃ³n automÃ¡tica en `/dev/sdc1`:

```bash
e2fsck -p /dev/sdc1
```

---

## ğŸ¯ Actividad Final Desarrollada

1. **SituaciÃ³n**: El sistema `/dev/sdb1` (ext2) estÃ¡ lento y sin mantenimiento.
    a. Verificar su integridad automÃ¡ticamente:
    
```bash
e2fsck -p /dev/sdb1
```
    
    b. Convertirlo a ext3, reiniciar contadores y renombrarlo a `BackupData`:
    
```bash
tune2fs -j -C 0 -L BackupData /dev/sdb1
```
    
    c. Asegurar chequeo cada 30 dÃ­as:
    
```bash
tune2fs -i 30d /dev/sdb1
```
    
2. **Sistema XFS `/dev/sdc1`**:
    a. Verificar sin modificar:
    
```bash
xfs_db /dev/sdc1
```
    
    b. Reparar:
    
```bash
xfs_repair /dev/sdc1
```

---

## ğŸ“š Comandos clave

- `du`, `df`
- `fsck`, `e2fsck`
- `tune2fs`
- `xfs_repair`, `xfs_db`