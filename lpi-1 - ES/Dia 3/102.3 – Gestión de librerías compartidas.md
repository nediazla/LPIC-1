
## 🎯 Objetivos

- Comprender qué son las bibliotecas compartidas.
- Identificar bibliotecas requeridas por un programa.
- Configurar rutas de bibliotecas.
- Usar herramientas como `ldd`, `ldconfig`, y `LD_LIBRARY_PATH`.

---

## 📚 Contenido

### 🔹 1. ¿Qué es una biblioteca compartida?

- Son archivos de código compilado reutilizable (funciones, clases) usados por varios programas.
- Se enlazan dinámicamente: el código no se copia al ejecutable, sino que se carga en tiempo de ejecución.

### 🔹 2. Estáticas vs Compartidas

|Tipo|Características|
|---|---|
|Estática|Se incorpora al binario. Ocupa más espacio, pero no tiene dependencias externas.|
|Compartida|Se carga en tiempo de ejecución. Menor tamaño y uso compartido en memoria.|

---

### 🔹 3. Convenciones de nombres

Ejemplo de nombre:

```bash
libpthread.so.0
```

Partes:

- `libpthread`: nombre
- `.so`: objeto compartido
- `.0`: versión

---

### 🔹 4. Ubicaciones comunes

- `/lib`, `/lib64`, `/usr/lib`, `/usr/local/lib`

Para glibc:

```bash
ls -l /lib/x86_64-linux-gnu/libc.so.6
# Enlace simbólico a libc-2.24.so
```

---

### 🔹 5. Configuración de rutas

#### Archivos:

- `/etc/ld.so.conf`
- `/etc/ld.so.conf.d/*.conf`

#### Comando:

```bash
sudo ldconfig -v
sudo ldconfig -p | grep libfuse
```

#### Variable temporal:

```bash
export LD_LIBRARY_PATH=/usr/local/mylib
echo $LD_LIBRARY_PATH
unset LD_LIBRARY_PATH
```

---

### 🔹 6. Buscar dependencias

#### Con `ldd`:

```bash
ldd /usr/bin/git
ldd /lib/x86_64-linux-gnu/libc.so.6
ldd -u /usr/bin/git  # dependencias no utilizadas
```

#### Con `objdump`:

```bash
objdump -p /bin/bash | grep NEEDED
```

---

## 🧪 Ejercicios Guiados

1. Dividir los componentes de estos archivos:

```bash
linux-vdso.so.1 → linux-vdso, so, 1
libc.so.6       → libc, so, 6
```

2. Crear `mylib.conf` en `/etc/ld.so.conf.d`:

```bash
echo "/opt/lib/mylib" | sudo tee /etc/ld.so.conf.d/mylib.conf
sudo ldconfig
```

3. Ver dependencias de `kill`:

```bash
ldd /bin/kill
```

---

## 📝 Actividad Final

1. Crear una biblioteca simulada en `/opt/libdemo`:

```bash
mkdir -p /opt/libdemo
# Copiar aquí una .so o crear un enlace simbólico de prueb
```

2. Añadir esa ruta al sistema:

```bash
echo "/opt/libdemo" | sudo tee /etc/ld.so.conf.d/demo.conf
sudo ldconfig
```

3. Verificar que se reconoce:

```bash
ldconfig -p | grep demo
```