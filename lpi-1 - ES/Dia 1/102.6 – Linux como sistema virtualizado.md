
## 游꿢 Objetivos

- Comprender el concepto general de virtualizaci칩n y contenedores.
- Diferenciar tipos de m치quinas virtuales.
- Configurar plantillas de VMs y su implementaci칩n en la nube.
- Comprender el uso de herramientas como `cloud-init`, `virt-manager` y `dbus-uuidgen`.

---

## 游닄 Contenido

### 游댳 1. Introducci칩n a la Virtualizaci칩n

- Permite ejecutar m칰ltiples sistemas operativos en un mismo hardware f칤sico.
- Se logra mediante un **hipervisor**, que asigxnona recursos a las **m치quinas virtuales (guests)**.

---

### 游댳 2. Hipervisores comunes en Linux

- **Xen**: Tipo 1 (bare metal).
- **KVM**: Integrado en el kernel de Linux (Tipo 1 o 2).
- **VirtualBox**: Tipo 2, ejecutado sobre un SO.
- **QEMU**: Emulaci칩n + virtualizaci칩n, usado por libvirt.

---

### 游댳 3. Tipos de M치quinas Virtuales

| Tipo              | Descripci칩n                                                                    |
| ----------------- | ------------------------------------------------------------------------------ |
| Fully Virtualized | No requiere cambios en el SO. Requiere CPU con VT-x o AMD-V.                   |
| Paravirtualized   | Requiere un kernel modificado y drivers invitados. Mejor rendimiento.          |
| Hybrid            | Combina ambos, usando drivers paravirtualizados sobre sistemas no modificados. |

---

### 游댳 4. Plantillas de M치quinas Virtuales

- Una plantilla es una VM base lista para clonar y reutilizar.
- Requiere cambiar nombre, MAC, y especialmente la **D-Bus Machine ID**:

```bash
sudo rm -f /etc/machine-id
sudo dbus-uuidgen --ensure=/etc/machine-id
```

Verificar ID:

```bash
dbus-uuidgen --get
```

---

### 游댳 5. Implementaci칩n en la nube (IaaS)

Componentes clave:

- **Instancias de computaci칩n**: VMs activas que consumen CPU y RAM.
- **Bloques de almacenamiento**: Discos virtuales para cada VM.
- **Redes virtuales**: Subredes, DNS, NAT, VPN.
- **Acceso remoto**: SSH con claves p칰blicas.

```bash
ssh-keygen
ssh-copy-id usuario@host
```

---

### 游댳 6. cloud-init

- Utilidad para automatizar la configuraci칩n inicial de una VM.
- Usa archivos `cloud-config` (YAML):

```yaml
#cloud-config
timezone: America/Madrid
hostname: servidor-web
packages:
  - nginx
```

---

### 游댳 7. Contenedores

- Entorno aislado que ejecuta solo lo necesario para una aplicaci칩n.
- M치s livianos que VMs.
- Tecnolog칤as: **Docker**, **LXC**, **LXD**, **systemd-nspawn**, **OpenShift**.
- Usan **cgroups** y **namespaces**.

---

## 游빍 Ejercicios Guiados

1. 쯊u CPU soporta virtualizaci칩n?

```bash
grep --color -E "vmx|svm" /proc/cpuinfo
```

2. Ver ID de m치quina D-Bus:

```bash
dbus-uuidgen --get
```

3. Configurar una nueva m치quina con Virt-Manager:

- Instala `virt-manager`
- Usa una imagen ISO para crear una nueva VM gr치fica.

---

## 游닇 Actividad Final

1. Crear una plantilla de VM base con Debian.
2. Clonarla y cambiar:
    - Hostname.
    - MAC address (autom치tico).
    - D-Bus ID:

```bash
sudo rm -f /etc/machine-id
sudo dbus-uuidgen --ensure=/etc/machine-id
```

1. Usar `cloud-init` para desplegar la VM clonada con un hostname y paquetes definidos.