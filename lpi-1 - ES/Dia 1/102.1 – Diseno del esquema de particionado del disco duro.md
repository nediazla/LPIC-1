
## ğŸ¯ Objetivos de la lecciÃ³n

- Comprender la relaciÃ³n entre discos, particiones, sistemas de archivos y volÃºmenes.
- DiseÃ±ar particiones adaptadas a diferentes usos del sistema.
- Conocer el uso de la particiÃ³n `/boot`, la particiÃ³n de intercambio y LVM.
- Aplicar comandos y buenas prÃ¡cticas en el diseÃ±o de particionado.

---

## ğŸ“š Contenido Ampliado

### ğŸ”¹ IntroducciÃ³n

Antes de poder usar un disco, este debe ser **particionado**. Una particiÃ³n es un subconjunto lÃ³gico del disco fÃ­sico. A su vez, dentro de cada particiÃ³n se implementa un **sistema de archivos**.

---

### ğŸ”¹ Puntos de Montaje

- Linux accede a discos y particiones mediante **puntos de montaje**.
- Ejemplo clÃ¡sico: montar la particiÃ³n de usuario en `/home`.
- Directorios comunes para montar:
    - `/` â†’ raÃ­z
    - `/boot` â†’ archivos del cargador de arranque
    - `/home`, `/var`, `/tmp` â†’ recomendados por separado segÃºn el uso.

**Comando Ãºtil**:

```bash
cat /etc/fstab
```

Para ver los sistemas de archivos montados automÃ¡ticamente.

---

### ğŸ”¹ SeparaciÃ³n de Particiones

**Ventajas**
- Mejora la seguridad y rendimiento.
- Facilita la recuperaciÃ³n ante errores.
- Previene que un directorio llene todo el disco.

**Ejemplo**:

- Servidores con `/var` separado (almacena logs, datos variables).
- Estaciones de trabajo con `/home` separado para datos de usuario.

---

### ğŸ”¹ ParticiÃ³n de Intercambio (Swap)

- Funciona como extensiÃ³n de la memoria RAM.
- No se monta como otros sistemas de archivos.
- Se puede implementar como:
    - ParticiÃ³n swap.
    - Archivo de intercambio.

**TamaÃ±o recomendado**:

- < 2 GB RAM â†’ 2x RAM.
- 2-8 GB RAM â†’ igual a RAM.
- > 8 GB â†’ 4 GB mÃ­nimo o uso especÃ­ficoLPI-Learning-Material-1â€¦.

**Comandos**:

```bash
# Crear un archivo de 1 GB para swap
dd if=/dev/zero of=/swapfile bs=1M count=1024
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile
```

---

### ğŸ”¹ LVM (Logical Volume Manager)

- Permite crear volÃºmenes lÃ³gicos sobre discos fÃ­sicos.
- Flexible para redimensionar volÃºmenes sin necesidad de reiniciar.
- Se puede usar con mÃºltiples discos fÃ­sicos.

**Componentes**:

- PV (Physical Volume): disco o particiÃ³n.
- VG (Volume Group): conjunto de PV.
- LV (Logical Volume): equivalente a particiÃ³n lÃ³gica.

**Ejemplo de flujo**:

```bash
pvcreate /dev/sdb1
vgcreate vgdatos /dev/sdb1
lvcreate -L 10G -n volumen1 vgdatos
mkfs.ext4 /dev/vgdatos/volumen1
mount /dev/vgdatos/volumen1 /mnt
```

---

## ğŸ§ª Ejercicios prÃ¡cticos

### âœ… Ejercicio 1: Verificar puntos de montaje

```bash
lsblk
mount | column -t
```

### âœ… Ejercicio 2: Crear archivo de swap de 512 MB

```bash
dd if=/dev/zero of=/swapfile2 bs=1M count=512
chmod 600 /swapfile2
mkswap /swapfile2
swapon /swapfile2
```
### âœ… Ejercicio 3: Usar LVM

```bash
# Crear volumen lÃ³gico
pvcreate /dev/sdc1
vgcreate vg01 /dev/sdc1
lvcreate -L 2G -n datos vg01
mkfs.ext4 /dev/vg01/datos
mount /dev/vg01/datos /mnt
```

---

## ğŸ“ Actividad Final

Pida al alumnado diseÃ±ar un esquema de particionado para:

1. Un servidor web.
2. Un escritorio personal.
3. Una mÃ¡quina virtual con poco espacio.

Cada diseÃ±o debe especificar:

- Directorios separados.
- Uso o no de swap.
- Uso de LVM.

---

### ğŸ–¥ï¸ 1. **Servidor Web**

#### Esquema:

- `/` â€“ 20 GB
- `/boot` â€“ 1 GB
- `/var` â€“ 40 GB (con LVM)
- `/home` â€“ 10 GB (con LVM)
- `swap` â€“ 4 GB

#### Comandos:

```bash
# Crear particiones
fdisk /dev/sdb  # Crear /boot y una grande para LVM

# Supongamos: /dev/sdb1 = /boot y /dev/sdb2 = LVM

# Formatear /boot
mkfs.ext4 /dev/sdb1
mount /dev/sdb1 /boot

# Configurar LVM
pvcreate /dev/sdb2
vgcreate vgweb /dev/sdb2

# Crear volÃºmenes lÃ³gicos
lvcreate -L 40G -n var vgweb
lvcreate -L 10G -n home vgweb
lvcreate -L 4G -n swap vgweb

# Formatear volÃºmenes
mkfs.ext4 /dev/vgweb/var
mkfs.ext4 /dev/vgweb/home
mkswap /dev/vgweb/swap
swapon /dev/vgweb/swap

# Montar puntos de montaje
mount /dev/vgweb/var /var
mount /dev/vgweb/home /home
```

---

### ğŸ’» 2. **EstaciÃ³n de Trabajo**

#### Esquema:

- `/` â€“ 30 GB
- `/boot` â€“ 1 GB
- `/home` â€“ 100 GB (con LVM)
- `swap` â€“ 8 GB (RAM = 8 GB)

#### Comandos:

```bash
fdisk /dev/sdc  # Crear /boot y particiÃ³n para LVM

# /dev/sdc1 = /boot, /dev/sdc2 = LVM

mkfs.ext4 /dev/sdc1
mount /dev/sdc1 /boot

# Configurar LVM
pvcreate /dev/sdc2
vgcreate vgdesk /dev/sdc2

lvcreate -L 100G -n home vgdesk
lvcreate -L 8G -n swap vgdesk

mkfs.ext4 /dev/vgdesk/home
mkswap /dev/vgdesk/swap
swapon /dev/vgdesk/swap

mount /dev/vgdesk/home /home
```

---

### ğŸ§ª 3. **MÃ¡quina Virtual de Laboratorio**

#### Esquema:

- `/` â€“ 20 GB
- `/boot` â€“ 500 MB
- `swap` â€“ 1 GB
- Sin LVM

#### Comandos:

```bash
fdisk /dev/sdd  # Crear 3 particiones: /boot, /, swap

# /dev/sdd1 = /boot, /dev/sdd2 = /, /dev/sdd3 = swap

mkfs.ext4 /dev/sdd1
mkfs.ext4 /dev/sdd2
mkswap /dev/sdd3
swapon /dev/sdd3

mount /dev/sdd1 /boot
mount /dev/sdd2 /
```