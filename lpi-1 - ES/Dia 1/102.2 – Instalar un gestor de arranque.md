
## ğŸ¯ Objetivos

- Entender quÃ© es un gestor de arranque y cÃ³mo funciona.
- Conocer las diferencias entre GRUB Legacy y GRUB 2.
- Saber cÃ³mo ubicar, configurar e instalar GRUB    
- Aprender a modificar parÃ¡metros y entradas del menÃº de arranque.

---

## ğŸ“š Contenido

### ğŸ”¹ 1. IntroducciÃ³n

Al encender un sistema, lo primero que se ejecuta es el **cargador de arranque**. Este se encarga de cargar el **kernel** del sistema operativo en memoria y transferirle el control.

GRUB es el gestor de arranque mÃ¡s comÃºn en Linux. Puede arrancar diferentes sistemas operativos y manejar mÃºltiples configuraciones de kernel.

---

### ğŸ”¹ 2. GRUB Legacy vs GRUB 2

#### GRUB Legacy

- VersiÃ³n antigua (Ãºltima v0.97 en 2005).
- Configurado mediante `/boot/grub/menu.lst`.
- Comandos sencillos: `title`, `root`, `kernel`.

Ejemplo de entrada:

```bash
title Linux
root (hd0,0)
kernel /vmlinuz root=/dev/hda1
```

#### GRUB 2

- Reescrito desde cero.
- Archivo de configuraciÃ³n: `/boot/grub/grub.cfg`.
- ConfiguraciÃ³n mediante `/etc/default/grub` y `/etc/grub.d/`.
- Comando para regenerar el menÃº:

```bash
update-grub   # o
grub-mkconfig -o /boot/grub/grub.cfg
```

---

### ğŸ”¹ 3. Â¿DÃ³nde se instala el gestor?

- En sistemas MBR: GRUB se instala en el **MBR** (primer sector de 512 bytes).
- En sistemas UEFI: el firmware carga GRUB desde la particiÃ³n **ESP** (`/boot/efi`).
- El nÃºcleo y `initrd` suelen estar en `/boot`.

Comando para instalar GRUB:

```bash
grub-install /dev/sda
```

Con particiÃ³n montada:

```bash
mount /dev/sda1 /mnt
grub-install --boot-directory=/mnt/boot /dev/sda
```

---

### ğŸ”¹ 4. La ParticiÃ³n /boot

- Contiene el kernel, initrd y archivos del gestor de arranque.
- TamaÃ±o recomendado: **300 MB**.
- Puede estar separada para compatibilidad o por seguridad.

---

## ğŸ§ª Ejercicios PrÃ¡cticos

### âœ… Ver ubicaciÃ³n del cargador

```bash
ls -l /boot
fdisk -l
```

### âœ… Montar particiÃ³n y reinstalar GRUB

```bash
mkdir /mnt/tmp
mount /dev/sda1 /mnt/tmp
grub-install --boot-directory=/mnt/tmp/boot /dev/sda
```

### âœ… Modificar GRUB 2

```bash
nano /etc/default/grub
update-grub
```

---

## ğŸ“ Actividad Final

Crear una entrada personalizada para arrancar desde una imagen ISO ubicada en `/boot`.

1. Copiar una ISO al directorio `/boot/iso/ubuntu.iso`.
2. Editar el archivo `/etc/grub.d/40_custom`:

```bash
menuentry "Ubuntu Live ISO" {
    set isofile="/boot/iso/ubuntu.iso"
    loopback loop (hd0,1)$isofile
    linux (loop)/casper/vmlinuz boot=casper iso-scan/filename=$isofile noeject noprompt splash --
    initrd (loop)/casper/initrd
}
```

3. Actualizar GRUB:

```bash
update-grub
```
