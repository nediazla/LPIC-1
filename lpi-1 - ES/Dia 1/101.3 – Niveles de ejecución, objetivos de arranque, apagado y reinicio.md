
## 🎯 Objetivos

- Comprender los distintos sistemas de inicialización: SysVinit, systemd y Upstart.
- Cambiar niveles de ejecución u objetivos de arranque.
- Usar comandos para iniciar, detener o reiniciar servicios y el sistema.
- Gestionar el apagado o reinicio de forma segura.

---
## 📚 Contenido

### 🔹 1. Introducción

Linux usa demonios (services) para gestionar procesos. Los administradores de servicios definen qué demonios deben ejecutarse según el propósito del sistema.

---

### 🔹 2. SysVinit

Utiliza **niveles de ejecución** (runlevels) definidos en `/etc/inittab`:

|Nivel|Propósito|
|---|---|
|0|Apagar|
|1|Usuario único (mantenimiento)|
|2-4|Multiusuario (varía según distro)|
|5|Multiusuario + entorno gráfico|
|6|Reinicio|

**Comandos:**

```bash
runlevel
telinit 3
```

Ejemplo de entrada en `/etc/inittab`:

```bash
id:3:initdefault:
```

---
### 🔹 3. systemd

systemd reemplaza a SysVinit en la mayoría de las distros modernas.

Usa **targets** en lugar de runlevels:

|Target|Equivalente|
|---|---|
|runlevel0.target|0 (apagado)|
|runlevel3.target|3|
|graphical.target|5|
|multi-user.target|3|

**Comandos útiles:**

```bash
systemctl get-default
systemctl set-default multi-user.target
systemctl isolate graphical.target
```

Para reinicio o apagado:

```bash
systemctl reboot
systemctl poweroff
```

---

### 🔹 4. Upstart

Sistema en desuso (usado por Ubuntu hasta 2015). Usaba comandos como:

```bash
initctl list
status tty6
start tty6
stop tty6
```

---

### 🔹 5. Apagado y Reinicio

**shutdown**: herramienta universal

```bash
shutdown -r now      # Reiniciar inmediatamente
shutdown -h +5       # Apagar en 5 minutos
shutdown -c          # Cancelar apagado
```

**Mensajes a usuarios:**

```bash
shutdown +2 "Se reiniciará el sistema en 2 minutos"
```

---

## 🧪 Ejercicios Guiados

### ✅ Verificar runlevel o target

```bash
runlevel
systemctl get-default
```

### ✅ Cambiar a modo texto (multiusuario)

```bash
systemctl isolate multi-user.target
```

### ✅ Apagar el sistema

```bash
shutdown -h now
systemctl poweroff
```

### ✅ Cancelar apagado

```bash
shutdown -c
```

---

## 📝 Actividad Final

Elabora un script llamado `reinicio_programado.sh` que:

1. Programe el reinicio del sistema en 2 minutos.
2. Notifique al usuario.
3. Permita cancelarlo con un mensaje en pantalla.

Ejemplo:

```bash
#!/bin/bash
echo "Reinicio programado en 2 minutos..."
shutdown -r +2 "El sistema se reiniciará. Guarde su trabajo."
echo "Puede cancelar con 'shutdown -c'"
```